{include header}
<div class="mb-3 h4 float-left">{lang('Edit user')}</div>
<div class="float-right">
    <a class="btn btn-outline-info btn-sm" href="{url('admin/allusers')}" role="button"><i class="bi bi-plus mr-1"></i>{lang('All users')}</a>
</div>
<div class="clearfix"></div>
<div class="mb-3 text-secondary"><small>{lang('Items marked with ')}<i class="bi bi-asterisk"></i>{lang(' are required')}</small></div>
<div>
    <form>
        <div class="form-group">
            <label for="username">{lang('Username')}<small><i class="bi bi-asterisk ml-2 text-secondary"></i></small></label>
            <input type="text" class="form-control" id="username" value="{$users.username}" maxlength="50" disabled>
            <small class="form-text text-muted">{lang('Usernames cannot be changed.')}</small>
        </div>
        <div class="form-group">
            <label for="firstname">{lang('First name')}</label>
            <input type="text" class="form-control" id="firstname" name="firstname" value="{$users.firstname}" maxlength="50">
        </div>
        <div class="form-group">
            <label for="lastname">{lang('Last name')}</label>
            <input type="text" class="form-control" id="lastname" name="lastname" value="{$users.lastname}" maxlength="50">
        </div>
        <div class="form-group">
            <label for="nickname">{lang('Nickname')}<small><i class="bi bi-asterisk ml-2 text-secondary"></i></small></label>
            <input type="text" class="form-control" id="nickname" name="nickname" value="{$users.nickname}" maxlength="50">
            <small class="form-text text-muted">{lang('Usernames cannot be changed.')}</small>
        </div>
        <div class="form-group">
            <label for="publicname">{lang('Display name publicly as')}</label>
            <select class="custom-select" id="publicname" name="publicname">
                {each $item in $users.publicly}
                <option value="{$item}"{if($users.publicname == $item)} selected="selected"{endif}>{$item}</option>
                {endeach}
            </select>
        </div>
        <div class="form-group">
            <label for="email">{lang('Email')}<small><i class="bi bi-asterisk ml-2 text-secondary"></i></small></label>
            <input type="text" class="form-control" id="email" name="email" value="{$users.email}" maxlength="100">
        </div>
        <div class="form-group">
            <label for="url">{lang('Website')}</label>
            <input type="text" class="form-control" id="url" name="url" value="{$users.url}" maxlength="100">
        </div>
        <div class="form-group">
            <label for="language">{lang('Language')}</label>
            <select class="custom-select" id="language" name="language">
                <option value="">{lang('Site default')}</option>
                <option value="zh-cn"{if($users.language == 'zh-cn')} selected="selected"{endif}>中文</option>
                <option value="en-us"{if($users.language == 'en-us')} selected="selected"{endif}>English (United States)</option>
            </select>
        </div>
        <div class="form-group">
            <label for="signature">{lang('Biographical info')}</label>
            <textarea class="form-control" id="signature" name="signature" rows="5">{$users.signature}</textarea>
            <small class="form-text text-muted">{lang('Share a little biographical information to fill out your profile. This may be shown publicly.')}</small>
        </div>
        <div class="form-group mb-4">
            <label>{lang('Profile picture')}</label>
            <div id="uploadimgdiv">
                <button type="button" id="uploadimg" class="btn btn-outline-info btn-sm px-4 rounded-pill">
                    {lang('Choose a image')}
                    <div class="spinner-border spinner-border-sm text-info d-none">
                        <span class="sr-only">Loading...</span>
                    </div>
                </button>
            </div>
            <div class="mt-2 d-none" id="imgdiv"><img src="{if($users.avatar != '')}{$webroot}{$users.avatar}{endif}" class="img-fluid"></div>
            <div class="mt-2 d-none" id="delimgdiv">
                <a id="delimg" href="#!" class="text-info ml-2" data-title="{lang('You sure you want to delete it?')}" data-alert="{lang('Once deleted, it cannot be restored!')}"><i class="bi bi-trash mr-1"></i>
                    {lang('Delete')}
                    <div class="spinner-border spinner-border-sm text-info d-none">
                        <span class="sr-only">Loading...</span>
                    </div>
                </a>
            </div>
        </div>
        <input type="hidden" name="id" id="id" value="{$users.id}">
        <button type="button" id="submit" class="btn btn-outline-info">
            {lang('Save')}
            <div class="spinner-border spinner-border-sm text-secondary d-none" id="submitloading">
                <span class="sr-only">Loading...</span>
            </div>
        </button>
    </form>
</div>
<div class="d-none">
    <div id="edituser_uploadimgedit">{url('admin/uploadimgprofile')}</div>
    <div id="edituser_deleteimgedit">{url('admin/deleteimgprofile')}</div>
</div>
<script src="{$webroot}public/static/js/uploadfile.js"></script>
<script src="{$webroot}public/static/js/profile.js"></script>
{include footer}